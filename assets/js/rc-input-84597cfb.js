import{c as e}from"./classnames-a0172216.js";import{r as n,a as t}from"./react-32c7b601.js";import{d as a,b as o,g as r,e as l,h as s,c,f as u}from"./@babel-7994ac7b.js";import{B as i,y as f}from"./rc-util-fa3fab39.js";function d(e,n,t){var a=n.cloneNode(!0),o=Object.create(e,{target:{value:a},currentTarget:{value:a}});return a.value=t,"number"==typeof n.selectionStart&&"number"==typeof n.selectionEnd&&(a.selectionStart=n.selectionStart,a.selectionEnd=n.selectionEnd),o}function p(e,n,t,a){if(t){var o=n;"click"!==n.type?"file"===e.type||void 0===a?t(o):t(o=d(n,e,a)):t(o=d(n,e,""))}}function m(e,n){if(e){e.focus(n);var t=(n||{}).cursor;if(t){var a=e.value.length;switch(t){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a)}}}}var v=function(s){var c,u,i=s.inputElement,f=s.children,d=s.prefixCls,p=s.prefix,m=s.suffix,v=s.addonBefore,x=s.addonAfter,g=s.className,h=s.style,y=s.disabled,w=s.readOnly,E=s.focused,C=s.triggerFocus,N=s.allowClear,b=s.value,S=s.handleReset,R=s.hidden,F=s.classes,B=s.classNames,j=s.dataAttrs,W=s.styles,k=s.components,A=null!=f?f:i,D=(null==k?void 0:k.affixWrapper)||"span",I=(null==k?void 0:k.groupWrapper)||"span",z=(null==k?void 0:k.wrapper)||"span",K=(null==k?void 0:k.groupAddon)||"span",L=n.useRef(null),P=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(s),M=n.cloneElement(A,{value:b,className:e(A.props.className,!P&&(null==B?void 0:B.variant))||null});if(P){var O,T=null;if(N){var V,H=!y&&!w&&b,q="".concat(d,"-clear-icon"),G="object"===a(N)&&null!=N&&N.clearIcon?N.clearIcon:"âœ–";T=t.createElement("span",{onClick:S,onMouseDown:function(e){return e.preventDefault()},className:e(q,(V={},o(V,"".concat(q,"-hidden"),!H),o(V,"".concat(q,"-has-suffix"),!!m),V)),role:"button",tabIndex:-1},G)}var J="".concat(d,"-affix-wrapper"),Q=e(J,(o(O={},"".concat(d,"-disabled"),y),o(O,"".concat(J,"-disabled"),y),o(O,"".concat(J,"-focused"),E),o(O,"".concat(J,"-readonly"),w),o(O,"".concat(J,"-input-with-clear-btn"),m&&N&&b),O),null==F?void 0:F.affixWrapper,null==B?void 0:B.affixWrapper,null==B?void 0:B.variant),U=(m||N)&&t.createElement("span",{className:e("".concat(d,"-suffix"),null==B?void 0:B.suffix),style:null==W?void 0:W.suffix},T,m);M=t.createElement(D,r({className:Q,style:null==W?void 0:W.affixWrapper,onClick:function(e){var n;null!==(n=L.current)&&void 0!==n&&n.contains(e.target)&&(null==C||C())}},null==j?void 0:j.affixWrapper,{ref:L}),p&&t.createElement("span",{className:e("".concat(d,"-prefix"),null==B?void 0:B.prefix),style:null==W?void 0:W.prefix},p),M,U)}if(function(e){return!(!e.addonBefore&&!e.addonAfter)}(s)){var X="".concat(d,"-group"),Y="".concat(X,"-addon"),Z="".concat(X,"-wrapper"),$=e("".concat(d,"-wrapper"),X,null==F?void 0:F.wrapper,null==B?void 0:B.wrapper),_=e(Z,o({},"".concat(Z,"-disabled"),y),null==F?void 0:F.group,null==B?void 0:B.groupWrapper);M=t.createElement(I,{className:_},t.createElement(z,{className:$},v&&t.createElement(K,{className:Y},v),M,x&&t.createElement(K,{className:Y},x)))}return t.cloneElement(M,{className:e(null===(c=M.props)||void 0===c?void 0:c.className,g)||null,style:l(l({},null===(u=M.props)||void 0===u?void 0:u.style),h),hidden:R})},x=["show"];function g(e,t){return n.useMemo((function(){var n={};t&&(n.show="object"===a(t)&&t.formatter?t.formatter:!!t);var o=n=l(l({},n),e),r=o.show,c=s(o,x);return l(l({},c),{},{show:!!r,showFormatter:"function"==typeof r?r:void 0,strategy:c.strategy||function(e){return e.length}})}),[e,t])}var h=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],y=n.forwardRef((function(a,d){var x=a.autoComplete,y=a.onChange,w=a.onFocus,E=a.onBlur,C=a.onPressEnter,N=a.onKeyDown,b=a.prefixCls,S=void 0===b?"rc-input":b,R=a.disabled,F=a.htmlSize,B=a.className,j=a.maxLength,W=a.suffix,k=a.showCount,A=a.count,D=a.type,I=void 0===D?"text":D,z=a.classes,K=a.classNames,L=a.styles,P=a.onCompositionStart,M=a.onCompositionEnd,O=s(a,h),T=n.useState(!1),V=c(T,2),H=V[0],q=V[1],G=n.useRef(!1),J=n.useRef(null),Q=function(e){J.current&&m(J.current,e)},U=i(a.defaultValue,{value:a.value}),X=c(U,2),Y=X[0],Z=X[1],$=null==Y?"":String(Y),_=n.useState(null),ee=c(_,2),ne=ee[0],te=ee[1],ae=g(A,k),oe=ae.max||j,re=ae.strategy($),le=!!oe&&re>oe;n.useImperativeHandle(d,(function(){return{focus:Q,blur:function(){var e;null===(e=J.current)||void 0===e||e.blur()},setSelectionRange:function(e,n,t){var a;null===(a=J.current)||void 0===a||a.setSelectionRange(e,n,t)},select:function(){var e;null===(e=J.current)||void 0===e||e.select()},input:J.current}})),n.useEffect((function(){q((function(e){return(!e||!R)&&e}))}),[R]);var se=function(e,n,t){var a,o,r=n;if(!G.current&&ae.exceedFormatter&&ae.max&&ae.strategy(n)>ae.max)n!==(r=ae.exceedFormatter(n,{max:ae.max}))&&te([(null===(a=J.current)||void 0===a?void 0:a.selectionStart)||0,(null===(o=J.current)||void 0===o?void 0:o.selectionEnd)||0]);else if("compositionEnd"===t.source)return;Z(r),J.current&&p(J.current,e,y,r)};n.useEffect((function(){var e;ne&&(null===(e=J.current)||void 0===e||e.setSelectionRange.apply(e,u(ne)))}),[ne]);var ce,ue=function(e){se(e,e.target.value,{source:"change"})},ie=function(e){G.current=!1,se(e,e.currentTarget.value,{source:"compositionEnd"}),null==M||M(e)},fe=function(e){C&&"Enter"===e.key&&C(e),null==N||N(e)},de=function(e){q(!0),null==w||w(e)},pe=function(e){q(!1),null==E||E(e)},me=le&&"".concat(S,"-out-of-range");return t.createElement(v,r({},O,{prefixCls:S,className:e(B,me),handleReset:function(e){Z(""),Q(),J.current&&p(J.current,e,y)},value:$,focused:H,triggerFocus:Q,suffix:function(){var n=Number(oe)>0;if(W||ae.show){var a=ae.showFormatter?ae.showFormatter({value:$,count:re,maxLength:oe}):"".concat(re).concat(n?" / ".concat(oe):"");return t.createElement(t.Fragment,null,ae.show&&t.createElement("span",{className:e("".concat(S,"-show-count-suffix"),o({},"".concat(S,"-show-count-has-suffix"),!!W),null==K?void 0:K.count),style:l({},null==L?void 0:L.count)},a),W)}return null}(),disabled:R,classes:z,classNames:K,styles:L}),(ce=f(a,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]),t.createElement("input",r({autoComplete:x},ce,{onChange:ue,onFocus:de,onBlur:pe,onKeyDown:fe,className:e(S,o({},"".concat(S,"-disabled"),R),null==K?void 0:K.input),style:null==L?void 0:L.input,ref:J,size:F,type:I,onCompositionStart:function(e){G.current=!0,null==P||P(e)},onCompositionEnd:ie}))))}));export{v as B,y as I,p as r,m as t,g as u};
