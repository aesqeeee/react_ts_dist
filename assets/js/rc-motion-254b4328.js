import{h as e,i as n,j as t,a as r,_ as a,d as o,c as i,e as u,b as c,r as s,g as f}from"./@babel-7994ac7b.js";import{c as v}from"./classnames-a0172216.js";import{c as l,q as d,z as m,h as p,s as E,J as y}from"./rc-util-fa3fab39.js";import{r as h}from"./react-32c7b601.js";var k=["children"],b=h.createContext({});function A(n){var t=n.children,r=e(n,k);return h.createElement(b.Provider,{value:r},t)}var L=function(e){n(i,e);var o=t(i);function i(){return r(this,i),o.apply(this,arguments)}return a(i,[{key:"render",value:function(){return this.props.children}}]),i}(h.Component),g="none",C="appear",R="enter",w="leave",S="none",P="prepare",j="start",N="active",O="end",T="prepared";function M(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var x,V,z,D=(x=l(),V="undefined"!=typeof window?window:{},z={animationend:M("Animation","AnimationEnd"),transitionend:M("Transition","TransitionEnd")},x&&("AnimationEvent"in V||delete z.animationend.animation,"TransitionEvent"in V||delete z.transitionend.transition),z),F={};if(l()){var I=document.createElement("div");F=I.style}var K={};function q(e){if(K[e])return K[e];var n=D[e];if(n)for(var t=Object.keys(n),r=t.length,a=0;a<r;a+=1){var o=t[a];if(Object.prototype.hasOwnProperty.call(n,o)&&o in F)return K[e]=n[o],K[e]}return""}var H=q("animationend"),J=q("transitionend"),U=!(!H||!J),W=H||"animationend",_=J||"transitionend";function B(e,n){return e?"object"===o(e)?e[n.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(n):null}const G=function(e){var n=h.useRef(),t=h.useRef(e);t.current=e;var r=h.useCallback((function(e){t.current(e)}),[]);function a(e){e&&(e.removeEventListener(_,r),e.removeEventListener(W,r))}return h.useEffect((function(){return function(){a(n.current)}}),[]),[function(e){n.current&&n.current!==e&&a(n.current),e&&e!==n.current&&(e.addEventListener(_,r),e.addEventListener(W,r),n.current=e)},a]};var Q=l()?h.useLayoutEffect:h.useEffect;var X=[P,j,N,O],Y=[P,T],Z=!1,$=!0;function ee(e){return e===N||e===O}const ne=function(e,n,t){var r=m(S),a=i(r,2),o=a[0],u=a[1],c=function(){var e=h.useRef(null);function n(){d.cancel(e.current)}return h.useEffect((function(){return function(){n()}}),[]),[function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var o=d((function(){a<=1?r({isCanceled:function(){return o!==e.current}}):t(r,a-1)}));e.current=o},n]}(),s=i(c,2),f=s[0],v=s[1];var l=n?Y:X;return Q((function(){if(o!==S&&o!==O){var e=l.indexOf(o),n=l[e+1],r=t(o);r===Z?u(n,!0):n&&f((function(e){function t(){e.isCanceled()||u(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,o]),h.useEffect((function(){return function(){v()}}),[]),[function(){u(P,!0)},o]};const te=function(e){var n=e;"object"===o(e)&&(n=e.transitionSupport);var t=h.forwardRef((function(e,t){var r=e.visible,a=void 0===r||r,o=e.removeOnLeave,s=void 0===o||o,f=e.forceRender,l=e.children,d=e.motionName,k=e.leavedClassName,A=e.eventProps,S=function(e,t){return!(!e.motionName||!n||!1===t)}(e,h.useContext(b).motion),O=h.useRef(),M=h.useRef();var x=function(e,n,t,r){var a=r.motionEnter,o=void 0===a||a,s=r.motionAppear,f=void 0===s||s,v=r.motionLeave,l=void 0===v||v,d=r.motionDeadline,p=r.motionLeaveImmediately,E=r.onAppearPrepare,y=r.onEnterPrepare,k=r.onLeavePrepare,b=r.onAppearStart,A=r.onEnterStart,L=r.onLeaveStart,S=r.onAppearActive,O=r.onEnterActive,M=r.onLeaveActive,x=r.onAppearEnd,V=r.onEnterEnd,z=r.onLeaveEnd,D=r.onVisibleChanged,F=m(),I=i(F,2),K=I[0],q=I[1],H=m(g),J=i(H,2),U=J[0],W=J[1],_=m(null),B=i(_,2),X=B[0],Y=B[1],te=h.useRef(!1),re=h.useRef(null);function ae(){return t()}var oe=h.useRef(!1);function ie(){W(g,!0),Y(null,!0)}function ue(e){var n=ae();if(!e||e.deadline||e.target===n){var t,r=oe.current;U===C&&r?t=null==x?void 0:x(n,e):U===R&&r?t=null==V?void 0:V(n,e):U===w&&r&&(t=null==z?void 0:z(n,e)),U!==g&&r&&!1!==t&&ie()}}var ce=G(ue),se=i(ce,1)[0],fe=function(e){var n,t,r;switch(e){case C:return c(n={},P,E),c(n,j,b),c(n,N,S),n;case R:return c(t={},P,y),c(t,j,A),c(t,N,O),t;case w:return c(r={},P,k),c(r,j,L),c(r,N,M),r;default:return{}}},ve=h.useMemo((function(){return fe(U)}),[U]),le=ne(U,!e,(function(e){if(e===P){var n=ve[P];return n?n(ae()):Z}var t;return pe in ve&&Y((null===(t=ve[pe])||void 0===t?void 0:t.call(ve,ae(),null))||null),pe===N&&(se(ae()),d>0&&(clearTimeout(re.current),re.current=setTimeout((function(){ue({deadline:!0})}),d))),pe===T&&ie(),$})),de=i(le,2),me=de[0],pe=de[1],Ee=ee(pe);oe.current=Ee,Q((function(){q(n);var t,r=te.current;te.current=!0,!r&&n&&f&&(t=C),r&&n&&o&&(t=R),(r&&!n&&l||!r&&p&&!n&&l)&&(t=w);var a=fe(t);t&&(e||a[P])?(W(t),me()):W(g)}),[n]),h.useEffect((function(){(U===C&&!f||U===R&&!o||U===w&&!l)&&W(g)}),[f,o,l]),h.useEffect((function(){return function(){te.current=!1,clearTimeout(re.current)}}),[]);var ye=h.useRef(!1);h.useEffect((function(){K&&(ye.current=!0),void 0!==K&&U===g&&((ye.current||K)&&(null==D||D(K)),ye.current=!0)}),[K,U]);var he=X;return ve[P]&&pe===j&&(he=u({transition:"none"},he)),[U,pe,he,null!=K?K:n]}(S,a,(function(){try{return O.current instanceof HTMLElement?O.current:y(M.current)}catch(e){return null}}),e),V=i(x,4),z=V[0],D=V[1],F=V[2],I=V[3],K=h.useRef(I);I&&(K.current=!0);var q,H=h.useCallback((function(e){O.current=e,p(t,e)}),[t]),J=u(u({},A),{},{visible:a});if(l)if(z===g)q=I?l(u({},J),H):!s&&K.current&&k?l(u(u({},J),{},{className:k}),H):f||!s&&!k?l(u(u({},J),{},{style:{display:"none"}}),H):null;else{var U,W;D===P?W="prepare":ee(D)?W="active":D===j&&(W="start");var _=B(d,"".concat(z,"-").concat(W));q=l(u(u({},J),{},{className:v(B(d,z),(U={},c(U,_,_&&W),c(U,d,"string"==typeof d),U)),style:F}),H)}else q=null;h.isValidElement(q)&&E(q)&&(q.ref||(q=h.cloneElement(q,{ref:H})));return h.createElement(L,{ref:M},q)}));return t.displayName="CSSMotion",t}(U);var re="add",ae="keep",oe="remove",ie="removed";function ue(e){var n;return n=e&&"object"===o(e)&&"key"in e?e:{key:e},u(u({},n),{},{key:String(n.key)})}function ce(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(ue)}var se=["component","children","onVisibleChanged","onAllRemoved"],fe=["status"],ve=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const le=function(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te,v=function(o){n(l,o);var v=t(l);function l(){var e;r(this,l);for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return e=v.call.apply(v,[this].concat(t)),c(s(e),"state",{keyEntities:[]}),c(s(e),"removeKey",(function(n){var t=e.state.keyEntities.map((function(e){return e.key!==n?e:u(u({},e),{},{status:ie})}));return e.setState({keyEntities:t}),t.filter((function(e){return e.status!==ie})).length})),e}return a(l,[{key:"render",value:function(){var n=this,t=this.state.keyEntities,r=this.props,a=r.component,o=r.children,c=r.onVisibleChanged,s=r.onAllRemoved,v=e(r,se),l=a||h.Fragment,d={};return ve.forEach((function(e){d[e]=v[e],delete v[e]})),delete v.keys,h.createElement(l,v,t.map((function(t,r){var a=t.status,v=e(t,fe),l=a===re||a===ae;return h.createElement(i,f({},d,{key:v.key,visible:l,eventProps:v,onVisibleChanged:function(e){(null==c||c(e,{key:v.key}),e)||0===n.removeKey(v.key)&&s&&s()}}),(function(e,n){return o(u(u({},e),{},{index:r}),n)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,r=n.keyEntities,a=ce(t),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=0,a=n.length,o=ce(e),i=ce(n);o.forEach((function(e){for(var n=!1,o=r;o<a;o+=1){var c=i[o];if(c.key===e.key){r<o&&(t=t.concat(i.slice(r,o).map((function(e){return u(u({},e),{},{status:re})}))),r=o),t.push(u(u({},c),{},{status:ae})),r+=1,n=!0;break}}n||t.push(u(u({},e),{},{status:oe}))})),r<a&&(t=t.concat(i.slice(r).map((function(e){return u(u({},e),{},{status:re})}))));var c={};return t.forEach((function(e){var n=e.key;c[n]=(c[n]||0)+1})),Object.keys(c).filter((function(e){return c[e]>1})).forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||r!==oe}))).forEach((function(n){n.key===e&&(n.status=ae)}))})),t}(r,a);return{keyEntities:o.filter((function(e){var n=r.find((function(n){var t=n.key;return e.key===t}));return!n||n.status!==ie||e.status!==oe}))}}}]),l}(h.Component);return c(v,"defaultProps",{component:"div"}),v}(U);export{te as C,A as M,le as a};
