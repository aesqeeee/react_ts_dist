import{e,b as t,g as n,c as r,_ as o,a as i,d as u,h as a}from"./@babel-7994ac7b.js";import{r as c}from"./react-32c7b601.js";import{r as l}from"./react-dom-23648d3c.js";import{c as s}from"./classnames-a0172216.js";import{R as f}from"./rc-resize-observer-c51b26ea.js";import{q as v,J as d,a as h,i as m}from"./rc-util-fa3fab39.js";var g=c.forwardRef((function(r,o){var i=r.height,u=r.offsetY,a=r.offsetX,l=r.children,v=r.prefixCls,d=r.onInnerResize,h=r.innerProps,m=r.rtl,g=r.extra,p={},b={display:"flex",flexDirection:"column"};return void 0!==u&&(p={height:i,position:"relative",overflow:"hidden"},b=e(e({},b),{},t(t(t(t(t({transform:"translateY(".concat(u,"px)")},m?"marginRight":"marginLeft",-a),"position","absolute"),"left",0),"right",0),"top",0))),c.createElement("div",{style:p},c.createElement(f,{onResize:function(e){e.offsetHeight&&d&&d()}},c.createElement("div",n({style:b,className:s(t({},"".concat(v,"-holder-inner"),v)),ref:o},h),l,g)))}));function p(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]}g.displayName="Filler";var b=c.forwardRef((function(n,o){var i=n.prefixCls,u=n.rtl,a=n.scrollOffset,l=n.scrollRange,f=n.onStartMove,d=n.onStopMove,h=n.onScroll,m=n.horizontal,g=n.spinSize,b=n.containerSize,R=n.style,S=n.thumbStyle,E=c.useState(!1),M=r(E,2),w=M[0],y=M[1],x=c.useState(null),L=r(x,2),H=L[0],z=L[1],T=c.useState(null),Y=r(T,2),N=Y[0],k=Y[1],D=!u,C=c.useRef(),I=c.useRef(),j=c.useState(!1),P=r(j,2),A=P[0],O=P[1],X=c.useRef(),_=function(){clearTimeout(X.current),O(!0),X.current=setTimeout((function(){O(!1)}),3e3)},K=l-b||0,B=b-g||0,V=c.useMemo((function(){return 0===a||0===K?0:a/K*B}),[a,K,B]),W=c.useRef({top:V,dragging:w,pageY:H,startTop:N});W.current={top:V,dragging:w,pageY:H,startTop:N};var F=function(e){y(!0),z(p(e,m)),k(W.current.top),f(),e.stopPropagation(),e.preventDefault()};c.useEffect((function(){var e=function(e){e.preventDefault()},t=C.current,n=I.current;return t.addEventListener("touchstart",e),n.addEventListener("touchstart",F),function(){t.removeEventListener("touchstart",e),n.removeEventListener("touchstart",F)}}),[]);var q=c.useRef();q.current=K;var J=c.useRef();J.current=B,c.useEffect((function(){if(w){var e,t=function(t){var n=W.current,r=n.dragging,o=n.pageY,i=n.startTop;if(v.cancel(e),r){var u=p(t,m)-o,a=i;!D&&m?a-=u:a+=u;var c=q.current,l=J.current,s=l?a/l:0,f=Math.ceil(s*c);f=Math.max(f,0),f=Math.min(f,c),e=v((function(){h(f,m)}))}},n=function(){y(!1),d()};return window.addEventListener("mousemove",t),window.addEventListener("touchmove",t),window.addEventListener("mouseup",n),window.addEventListener("touchend",n),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),v.cancel(e)}}}),[w]),c.useEffect((function(){_()}),[a]),c.useImperativeHandle(o,(function(){return{delayHidden:_}}));var G="".concat(i,"-scrollbar"),Q={position:"absolute",visibility:A?null:"hidden"},U={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return m?(Q.height=8,Q.left=0,Q.right=0,Q.bottom=0,U.height="100%",U.width=g,D?U.left=V:U.right=V):(Q.width=8,Q.top=0,Q.bottom=0,D?Q.right=0:Q.left=0,U.width="100%",U.height=g,U.top=V),c.createElement("div",{ref:C,className:s(G,t(t(t({},"".concat(G,"-horizontal"),m),"".concat(G,"-vertical"),!m),"".concat(G,"-visible"),A)),style:e(e({},Q),R),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:_},c.createElement("div",{ref:I,className:s("".concat(G,"-thumb"),t({},"".concat(G,"-thumb-moving"),w)),style:e(e({},U),S),onMouseDown:F}))}));function R(e){var t=e.children,n=e.setRef,r=c.useCallback((function(e){n(e)}),[]);return c.cloneElement(t,{ref:r})}var S=function(){function e(){i(this,e),t(this,"maps",void 0),t(this,"id",0),this.maps=Object.create(null)}return o(e,[{key:"set",value:function(e,t){this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}}]),e}();var E=10;function M(e,t,n){var o=c.useState(e),i=r(o,2),u=i[0],a=i[1],l=c.useState(null),s=r(l,2),f=s[0],v=s[1];return c.useEffect((function(){var r=function(e,t,n){var r,o,i=e.length,u=t.length;if(0===i&&0===u)return null;i<u?(r=e,o=t):(r=t,o=e);var a={__EMPTY_ITEM__:!0};function c(e){return void 0!==e?n(e):a}for(var l=null,s=1!==Math.abs(i-u),f=0;f<o.length;f+=1){var v=c(r[f]);if(v!==c(o[f])){l=f,s=s||v!==c(o[f+1]);break}}return null===l?null:{index:l,multiple:s}}(u||[],e||[],t);void 0!==(null==r?void 0:r.index)&&(null==n||n(r.index),v(e[r.index])),a(e)}),[e]),[f]}var w="object"===("undefined"==typeof navigator?"undefined":u(navigator))&&/Firefox/i.test(navigator.userAgent);const y=function(e,t){var n=c.useRef(!1),r=c.useRef(null);var o=c.useRef({top:e,bottom:t});return o.current.top=e,o.current.bottom=t,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e<0&&o.current.top||e>0&&o.current.bottom;return t&&i?(clearTimeout(r.current),n.current=!1):i&&!n.current||(clearTimeout(r.current),n.current=!0,r.current=setTimeout((function(){n.current=!1}),50)),!n.current&&i}};function x(e,t,n,r,o){var i=c.useRef(0),u=c.useRef(null),a=c.useRef(null),l=c.useRef(!1),s=y(t,n);var f=c.useRef(null),d=c.useRef(null);return[function(t){if(e){v.cancel(d.current),d.current=v((function(){f.current=null}),2);var n=t.deltaX,c=t.deltaY,h=t.shiftKey,m=n,g=c;("sx"===f.current||!f.current&&h&&c&&!n)&&(m=c,g=0,f.current="sx");var p=Math.abs(m),b=Math.abs(g);null===f.current&&(f.current=r&&p>b?"x":"y"),"y"===f.current?function(e,t){v.cancel(u.current),i.current+=t,a.current=t,s(t)||(w||e.preventDefault(),u.current=v((function(){var e=l.current?10:1;o(i.current*e),i.current=0})))}(t,g):function(e,t){o(t,!0),w||e.preventDefault()}(t,m)}},function(t){e&&(l.current=t.detail===a.current)}]}var L=14/15;var H=20;function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,H),Math.floor(t)}var T=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Y=[],N={overflowY:"auto",overflowAnchor:"none"};function k(o,i){var p=o.prefixCls,w=void 0===p?"rc-virtual-list":p,H=o.className,k=o.height,D=o.itemHeight,C=o.fullHeight,I=void 0===C||C,j=o.style,P=o.data,A=o.children,O=o.itemKey,X=o.virtual,_=o.direction,K=o.scrollWidth,B=o.component,V=void 0===B?"div":B,W=o.onScroll,F=o.onVirtualScroll,q=o.onVisibleChange,J=o.innerProps,G=o.extraRender,Q=o.styles,U=a(o,T),Z=!(!1===X||!k||!D),$=Z&&P&&(D*P.length>k||!!K),ee="rtl"===_,te=s(w,t({},"".concat(w,"-rtl"),ee),H),ne=P||Y,re=c.useRef(),oe=c.useRef(),ie=c.useState(0),ue=r(ie,2),ae=ue[0],ce=ue[1],le=c.useState(0),se=r(le,2),fe=se[0],ve=se[1],de=c.useState(!1),he=r(de,2),me=he[0],ge=he[1],pe=function(){ge(!0)},be=function(){ge(!1)},Re=c.useCallback((function(e){return"function"==typeof O?O(e):null==e?void 0:e[O]}),[O]),Se={getKey:Re};function Ee(e){ce((function(t){var n=function(e){var t=e;Number.isNaN(Fe.current)||(t=Math.min(t,Fe.current));return t=Math.max(t,0),t}("function"==typeof e?e(t):e);return re.current.scrollTop=n,n}))}var Me=c.useRef({start:0,end:ne.length}),we=c.useRef(),ye=M(ne,Re),xe=r(ye,1)[0];we.current=xe;var Le=function(e,t,n){var o=c.useState(0),i=r(o,2),u=i[0],a=i[1],l=c.useRef(new Map),s=c.useRef(new S),f=c.useRef();function h(){v.cancel(f.current)}function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h();var t=function(){l.current.forEach((function(e,t){if(e&&e.offsetParent){var n=d(e),r=n.offsetHeight;s.current.get(t)!==r&&s.current.set(t,n.offsetHeight)}})),a((function(e){return e+1}))};e?t():f.current=v(t)}return c.useEffect((function(){return h}),[]),[function(r,o){var i=e(r),u=l.current.get(i);o?(l.current.set(i,o),m()):l.current.delete(i),!u!=!o&&(o?null==t||t(r):null==n||n(r))},m,s.current,u]}(Re,null,null),He=r(Le,4),ze=He[0],Te=He[1],Ye=He[2],Ne=He[3],ke=c.useMemo((function(){if(!Z)return{scrollHeight:void 0,start:0,end:ne.length-1,offset:void 0};var e;if(!$)return{scrollHeight:(null===(e=oe.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:ne.length-1,offset:void 0};for(var t,n,r,o=0,i=ne.length,u=0;u<i;u+=1){var a=ne[u],c=Re(a),l=Ye.get(c),s=o+(void 0===l?D:l);s>=ae&&void 0===t&&(t=u,n=o),s>ae+k&&void 0===r&&(r=u),o=s}return void 0===t&&(t=0,n=0,r=Math.ceil(k/D)),void 0===r&&(r=ne.length-1),{scrollHeight:o,start:t,end:r=Math.min(r+1,ne.length-1),offset:n}}),[$,Z,ae,ne,Ne,k]),De=ke.scrollHeight,Ce=ke.start,Ie=ke.end,je=ke.offset;Me.current.start=Ce,Me.current.end=Ie;var Pe=c.useState({width:0,height:k}),Ae=r(Pe,2),Oe=Ae[0],Xe=Ae[1],_e=c.useRef(),Ke=c.useRef(),Be=c.useMemo((function(){return z(Oe.width,K)}),[Oe.width,K]),Ve=c.useMemo((function(){return z(Oe.height,De)}),[Oe.height,De]),We=De-k,Fe=c.useRef(We);Fe.current=We;var qe=ae<=0,Je=ae>=We,Ge=y(qe,Je),Qe=function(){return{x:ee?-fe:fe,y:ae}},Ue=c.useRef(Qe()),Ze=m((function(){if(F){var e=Qe();Ue.current.x===e.x&&Ue.current.y===e.y||(F(e),Ue.current=e)}}));function $e(e,t){var n=e;t?(l.flushSync((function(){ve(n)})),Ze()):Ee(n)}var et=function(e){var t=e,n=K-Oe.width;return t=Math.max(t,0),t=Math.min(t,n)},tt=m((function(e,t){t?(l.flushSync((function(){ve((function(t){return et(t+(ee?-e:e))}))})),Ze()):Ee((function(t){return t+e}))})),nt=x(Z,qe,Je,!!K,tt),rt=r(nt,2),ot=rt[0],it=rt[1];!function(e,t,n){var r,o=c.useRef(!1),i=c.useRef(0),u=c.useRef(null),a=c.useRef(null),l=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageY),r=i.current-t;i.current=t,n(r)&&e.preventDefault(),clearInterval(a.current),a.current=setInterval((function(){(!n(r*=L,!0)||Math.abs(r)<=.1)&&clearInterval(a.current)}),16)}},s=function(){o.current=!1,r()},f=function(e){r(),1!==e.touches.length||o.current||(o.current=!0,i.current=Math.ceil(e.touches[0].pageY),u.current=e.target,u.current.addEventListener("touchmove",l),u.current.addEventListener("touchend",s))};r=function(){u.current&&(u.current.removeEventListener("touchmove",l),u.current.removeEventListener("touchend",s))},h((function(){return e&&t.current.addEventListener("touchstart",f),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",f),r(),clearInterval(a.current)}}),[e])}(Z,re,(function(e,t){return!Ge(e,t)&&(ot({preventDefault:function(){},deltaY:e}),!0)})),h((function(){function e(e){Z&&e.preventDefault()}var t=re.current;return t.addEventListener("wheel",ot),t.addEventListener("DOMMouseScroll",it),t.addEventListener("MozMousePixelScroll",e),function(){t.removeEventListener("wheel",ot),t.removeEventListener("DOMMouseScroll",it),t.removeEventListener("MozMousePixelScroll",e)}}),[Z]),h((function(){K&&ve((function(e){return et(e)}))}),[Oe.width,K]);var ut=function(){var e,t;null===(e=_e.current)||void 0===e||e.delayHidden(),null===(t=Ke.current)||void 0===t||t.delayHidden()},at=function(t,n,o,i,a,l,s,f){var d=c.useRef(),m=c.useState(null),g=r(m,2),p=g[0],b=g[1];return h((function(){if(p&&p.times<E){if(!t.current)return void b((function(t){return e({},t)}));l();var r=p.targetAlign,u=p.originAlign,c=p.index,f=p.offset,v=t.current.clientHeight,d=!1,h=r,m=null;if(v){for(var g=r||u,R=0,S=0,M=0,w=Math.min(n.length-1,c),y=0;y<=w;y+=1){var x=a(n[y]);S=R;var L=o.get(x);R=M=S+(void 0===L?i:L)}for(var H="top"===g?f:v-f,z=w;z>=0;z-=1){var T=a(n[z]),Y=o.get(T);if(void 0===Y){d=!0;break}if((H-=Y)<=0)break}switch(g){case"top":m=S-f;break;case"bottom":m=M-v+f;break;default:var N=t.current.scrollTop;S<N?h="top":M>N+v&&(h="bottom")}null!==m&&s(m),m!==p.lastTop&&(d=!0)}d&&b(e(e({},p),{},{times:p.times+1,targetAlign:h,lastTop:m}))}}),[p,t.current]),function(e){if(null!=e){if(v.cancel(d.current),"number"==typeof e)s(e);else if(e&&"object"===u(e)){var t,r=e.align;t="index"in e?e.index:n.findIndex((function(t){return a(t)===e.key}));var o=e.offset;b({times:0,index:t,offset:void 0===o?0:o,originAlign:r})}}else f()}}(re,ne,Ye,D,Re,(function(){return Te(!0)}),Ee,ut);c.useImperativeHandle(i,(function(){return{getScrollInfo:Qe,scrollTo:function(e){var t;(t=e)&&"object"===u(t)&&("left"in t||"top"in t)?(void 0!==e.left&&ve(et(e.left)),at(e.top)):at(e)}}})),h((function(){if(q){var e=ne.slice(Ce,Ie+1);q(e,ne)}}),[Ce,Ie,ne]);var ct=function(e,t,n,o){var i=c.useMemo((function(){return[new Map,[]]}),[e,n.id,o]),u=r(i,2),a=u[0],l=u[1];return function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,u=a.get(r),c=a.get(i);if(void 0===u||void 0===c)for(var s=e.length,f=l.length;f<s;f+=1){var v,d=e[f],h=t(d);a.set(h,f);var m=null!==(v=n.get(h))&&void 0!==v?v:o;if(l[f]=(l[f-1]||0)+m,h===r&&(u=f),h===i&&(c=f),void 0!==u&&void 0!==c)break}return{top:l[u-1]||0,bottom:l[c]}}}(ne,Re,Ye,D),lt=null==G?void 0:G({start:Ce,end:Ie,virtual:$,offsetX:fe,offsetY:je,rtl:ee,getSize:ct}),st=function(e,t,n,r,o,i,u){var a=u.getKey;return e.slice(t,n+1).map((function(e,n){var u=i(e,t+n,{style:{width:r}}),l=a(e);return c.createElement(R,{key:l,setRef:function(t){return o(e,t)}},u)}))}(ne,Ce,Ie,K,ze,A,Se),ft=null;k&&(ft=e(t({},I?"height":"maxHeight",k),N),Z&&(ft.overflowY="hidden",K&&(ft.overflowX="hidden"),me&&(ft.pointerEvents="none")));var vt={};return ee&&(vt.dir="rtl"),c.createElement("div",n({style:e(e({},j),{},{position:"relative"}),className:te},vt,U),c.createElement(f,{onResize:function(e){Xe({width:e.width||e.offsetWidth,height:e.height||e.offsetHeight})}},c.createElement(V,{className:"".concat(w,"-holder"),style:ft,ref:re,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==ae&&Ee(t),null==W||W(e),Ze()},onMouseEnter:ut},c.createElement(g,{prefixCls:w,height:De,offsetX:fe,offsetY:je,scrollWidth:K,onInnerResize:Te,ref:oe,innerProps:J,rtl:ee,extra:lt},st))),$&&De>k&&c.createElement(b,{ref:_e,prefixCls:w,scrollOffset:ae,scrollRange:De,rtl:ee,onScroll:$e,onStartMove:pe,onStopMove:be,spinSize:Ve,containerSize:Oe.height,style:null==Q?void 0:Q.verticalScrollBar,thumbStyle:null==Q?void 0:Q.verticalScrollBarThumb}),$&&K>Oe.width&&c.createElement(b,{ref:Ke,prefixCls:w,scrollOffset:fe,scrollRange:K,rtl:ee,onScroll:$e,onStartMove:pe,onStopMove:be,spinSize:Be,containerSize:Oe.width,horizontal:!0,style:null==Q?void 0:Q.horizontalScrollBar,thumbStyle:null==Q?void 0:Q.horizontalScrollBarThumb}))}var D=c.forwardRef(k);D.displayName="List";export{D as L};
